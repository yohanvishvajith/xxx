<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Error 404</title>
  <style>
    body {
      background-color: white;
      color: white;
      font-family: 'Courier New', monospace;
      padding: 20px;
      line-height: 1.5;
    }
    pre {
      background-color: white;
      padding: 15px;
      border-radius: 5px;
      overflow-x: auto;
      white-space: pre-wrap;
      margin: 10px 0;
    }
    .code-block {
      margin-bottom: 30px;
    }
    h2 {
      color: white;
      margin-top: 30px;
      border-bottom: 1px solid white;
      padding-bottom: 5px;
    }
  </style>
</head>
<body>
  <pre><code>
    
  <div class="code-block">

    <h2>Chat Application</h2>
    <h3>1. One-time Chat Implementation</h3>

    <h3>OneChatServer.java</h3>    

    import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

public class OneChatServer {
    public static void main(String[] args) {
        try {
            // Create server socket on port 1111
            ServerSocket serverSocket = new ServerSocket(1111);
            
            // Wait for client connection
            Socket socket = serverSocket.accept();
            
            // Read message from client
            DataInputStream ReadClientMessage = new DataInputStream(socket.getInputStream());
            String clientMessage = ReadClientMessage.readUTF();
            System.out.println(clientMessage);
            
            // Send response to client
            DataOutputStream writeToClient = new DataOutputStream(socket.getOutputStream());
            writeToClient.writeUTF("Hello Client");
            writeToClient.flush();
            
            // Close connections
            socket.close();
            serverSocket.close();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }
}

    <h3>OneChatClient.java</h3> 

    import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;

public class OneChatClient {
    public static void main(String[] args) {
        try {
            // Connect to server on localhost:1111
            Socket socket = new Socket("localhost", 1111);
            
            // Send message to server
            DataOutputStream writeToServer = new DataOutputStream(socket.getOutputStream());
            writeToServer.writeUTF("Hello Server");
            writeToServer.flush();
            
            // Read server response
            DataInputStream ReadServerMessage = new DataInputStream(socket.getInputStream());
            String clientMessage = ReadServerMessage.readUTF();
            System.out.println(clientMessage);
            
            // Close connection
            socket.close();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }
}

    <h3>2. Loop Chat Implementation</h3>

    <h3>ChatLoopServer.java</h3>

    import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;

public class ChatLoopServer {
    public static void main(String[] args) {
        try(ServerSocket serverSocket = new ServerSocket(1234)) {
            System.out.println("Server started. Listening on port 1234..." + serverSocket);
            
            while (true) {
                // Accept client connection
                Socket socket = serverSocket.accept();
                System.out.println("Client is Connected ...." + serverSocket);
                
                // Set up input/output streams
                DataInputStream dataInputStream = new DataInputStream(socket.getInputStream());
                DataOutputStream dataOutputStream = new DataOutputStream(socket.getOutputStream());
                
                String readClientMessage;
                
                while (true) {
                    // Read client message
                    readClientMessage = dataInputStream.readUTF();
                    System.out.println("Client Says :" + readClientMessage);
                    
                    // Exit condition
                    if(readClientMessage.equals("404")) {
                        socket.close();
                        serverSocket.close();
                        System.out.println("Client disconnected: " + socket);
                        System.exit(0);
                        break;
                    }
                    
                    // Get server input and send to client
                    System.out.print("Server Write :");
                    BufferedReader serverInput = new BufferedReader(new InputStreamReader(System.in));
                    String serverMessage = serverInput.readLine();
                    dataOutputStream.writeUTF(serverMessage);
                    
                    // Exit condition
                    if(serverMessage.equals("404")) {
                        dataOutputStream.flush();
                        socket.close();
                        serverSocket.close();
                        System.exit(0);
                        break;
                    } else {
                        dataOutputStream.flush();
                    }
                }
            }
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }
}
    <h3>ChatLoopClient.java</h3>

    import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.InputStreamReader;
import java.net.Socket;

public class ChatLoopClient {
    public static void main(String[] args) {
        try(Socket socket = new Socket("localhost", 1234)) {
            System.out.println("Connected to server.");
            
            // Set up input/output streams
            DataOutputStream dataOutputStream = new DataOutputStream(socket.getOutputStream());
            DataInputStream dataInputStream = new DataInputStream(socket.getInputStream());
            BufferedReader clientInput = new BufferedReader(new InputStreamReader(System.in));
            
            String clientMessage;
            while (true) {
                // Get client input and send to server
                System.out.println("Client Write :");
                clientMessage = clientInput.readLine();
                dataOutputStream.writeUTF(clientMessage);
                
                // Exit condition
                if(clientMessage.equals("404")) {
                    dataOutputStream.flush();
                    socket.close();
                    System.exit(0);
                } else {
                    dataOutputStream.flush();
                }
                
                // Read server response
                String readServerMessage = dataInputStream.readUTF();
                System.out.println("Server Says :" + readServerMessage);
                
                // Exit condition
                if(readServerMessage.equals("404")) {
                    socket.close();
                    System.out.println("Server disconnected: " + socket);
                    System.exit(0);
                    break;
                }
            }
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }
}
    

    <h3>3. Group Chat Implementation</h3>

    <h3>ChatGroupServer.java</h3>

    import java.net.ServerSocket;
import java.net.Socket;

public class ChatGroupServer {
    private final ServerSocket serverSocket;

    public ChatGroupServer(ServerSocket serverSocket) {
        this.serverSocket = serverSocket;
    }

    public void startServer() {
        try {
            while (!serverSocket.isClosed()) {
                // Wait for client connection
                Socket socket = serverSocket.accept();
                System.out.println("A New Client has Connected");
                
                // Create handler for the client
                ChatGroupHandler chatGroupHandler = new ChatGroupHandler(socket);
                
                // Start handler thread
                Thread thread = new Thread(chatGroupHandler);
                thread.start();
            }
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }

    public static void main(String[] args) {
        ServerSocket serverSocket = null;
        try {
            // Create server socket on port 1234
            serverSocket = new ServerSocket(1234);
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
        
        // Start server
        ChatGroupServer chatGroupServer = new ChatGroupServer(serverSocket);
        System.out.println("Start Server " + serverSocket);
        chatGroupServer.startServer();
    }
}

    <h3>ChatGroupHandler.java</h3>

    import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;
import java.util.ArrayList;

public class ChatGroupHandler implements Runnable {
    public static ArrayList<ChatGroupHandler> chatGroupHandlers = new ArrayList<>();
    private Socket socket;
    private DataInputStream dataInputStream;
    private DataOutputStream dataOutputStream;
    private String clientUserName;

    public ChatGroupHandler(Socket socket) throws IOException {
        this.socket = socket;
        this.dataOutputStream = new DataOutputStream(socket.getOutputStream());
        this.dataInputStream = new DataInputStream(socket.getInputStream());
        this.clientUserName = dataInputStream.readUTF(); // Read username
        chatGroupHandlers.add(this); // Add to handler list
        broadcastMessage("Server Says " + clientUserName + " has entered the chat");
    }

    public void closeUtils(Socket socket, DataOutputStream dataOutputStream, 
                          DataInputStream dataInputStream) throws IOException {
        removeClientHandler();
        socket.close();
        dataOutputStream.close();
        dataInputStream.close();
    }

    @Override
    public void run() {
        String messageFromClient;
        while (socket.isConnected()) {
            try {
                messageFromClient = dataInputStream.readUTF();
                broadcastMessage(messageFromClient); // Broadcast to all clients
            } catch (Exception e) {
                try {
                    closeUtils(socket, dataOutputStream, dataInputStream);
                } catch (IOException ex) {
                    throw new RuntimeException(ex);
                }
            }
        }
    }

    public void broadcastMessage(String messageToSend) {
        for(ChatGroupHandler chatGroupHandler : chatGroupHandlers) {
            if(!chatGroupHandler.clientUserName.equals(clientUserName)) {
                try {
                    chatGroupHandler.dataOutputStream.writeUTF(messageToSend);
                    chatGroupHandler.dataOutputStream.flush();
                } catch (IOException e) {
                    try {
                        closeUtils(socket, dataOutputStream, dataInputStream);
                    } catch (IOException ex) {
                        throw new RuntimeException(ex);
                    }
                    throw new RuntimeException(e);
                }
            }
        }
    }

    public void removeClientHandler() {
        chatGroupHandlers.remove(this);
        broadcastMessage("Server Says: " + clientUserName + " has left the chat");
    }
}

    <h3>ChatGroupClient.java</h3>

      import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;
import java.util.Scanner;

public class ChatGroupClient {
    private Socket socket;
    private DataInputStream dataInputStream;
    private DataOutputStream dataOutputStream;
    private String uname;

    public ChatGroupClient(Socket socket, String uname) throws IOException {
        this.socket = socket;
        this.uname = uname;
        this.dataInputStream = new DataInputStream(socket.getInputStream());
        this.dataOutputStream = new DataOutputStream(socket.getOutputStream());
    }

    public void sendMessage() throws IOException {
        try {
            dataOutputStream.writeUTF(uname);
            dataOutputStream.flush();

            Scanner scanner = new Scanner(System.in);
            while (socket.isConnected()) {
                String messageToSend = scanner.nextLine();
                dataOutputStream.writeUTF(uname + " " + messageToSend);
                dataOutputStream.flush();
            }
        } catch (IOException e) {
            closeUtils(socket, dataOutputStream, dataInputStream);
            throw new RuntimeException(e);
        }
    }

    public void closeUtils(Socket socket, DataOutputStream dataOutputStream, 
                          DataInputStream dataInputStream) throws IOException {
        socket.close();
        dataOutputStream.close();
        dataInputStream.close();
    }

    public void listenMessage() {
        new Thread(new Runnable() {
            @Override
            public void run() {
                String messageFromServer;
                while (socket.isConnected()) {
                    try {
                        messageFromServer = dataInputStream.readUTF();
                        System.out.println(messageFromServer);
                    } catch (IOException e) {
                        try {
                            closeUtils(socket, dataOutputStream, dataInputStream);
                        } catch (IOException ex) {
                            throw new RuntimeException(ex);
                        }
                        throw new RuntimeException(e);
                    }
                }
            }
        }).start();
    }

    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        System.out.println("Enter your username for the group chat:");
        String username = scanner.nextLine();

        Socket socket;
        try {
            socket = new Socket("localhost", 1234);
        } catch (IOException e) {
            throw new RuntimeException(e);
        }

        try {
            ChatGroupClient chatGroupClient = new ChatGroupClient(socket, username);
            chatGroupClient.listenMessage();
            chatGroupClient.sendMessage();
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }
}

  </div>


</code></pre>
  <script>
    window.addEventListener('DOMContentLoaded', function() {
      // Copy all code blocks to clipboard
      const codeBlocks = document.querySelectorAll('pre code');
      let allCode = '';
      
      codeBlocks.forEach(block => {
        allCode += block.textContent + '\n\n';
      });
      
      navigator.clipboard.writeText(allCode).catch(function(err) {
        console.error('Clipboard write failed:', err);
      });
    });
  </script>
</body>
</html>
